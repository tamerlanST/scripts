HTTP/1.0 200 OK Cache-Control: no-cache Connection: Close Content-Length: 8041 Content-Type: text/html; charset=utf-8 Date: Fri, 11 Mar 2016 14:11:51 GMT Server: adf_http_server/4.3.0198  <!DOCTYPE html> <html> <head lang="en"> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="shortcut icon" href="/clogo/images/favicon.ico" type="image/x-icon"> <!-- Styles --> <link rel="stylesheet" href="login/css/normalize.css"/> <link rel="stylesheet" type="text/css" media="(max-width: 640px) and (orientation: portrait)" href="login/css/max-640px-and-portrait.css"> <link rel="stylesheet" type="text/css" media="(max-width: 640px) and (orientation: landscape)" href="login/css/max-640px-and-landscape.css"> <!--[if IE]> <link rel="stylesheet" type="text/css" href="login/css/styles-ie.css" /> <![endif]--> <link rel="stylesheet" type="text/css" href="login/css/styles-simple.css" /> <title>Wialon</title> <script> function replaceCharsAndDecode(str) { str = str.replace("&gt;", ">"); str = str.replace("&lt;", "<"); str = str.replace("&#39;", "'"); try { str = decodeURI(str) } catch(e) { } return str; } function extendUrl(href, newParams) { var href = href.split("#")[0].split("?"); var params = {}; if (href.length > 1) { var args = href[1].split("&"); for (var i = 0; i < args.length; i++) { var arg = args[i].split("="); if (arg[0] != "") params[arg[0]] = arg[0] + "=" + (arg.length > 1 ? arg[1] : ""); } } for (var i in newParams) params[i] = i + "=" + newParams[i]; var arr = []; for (var i in params) arr.push(params[i]); return href[0] + "?" + arr.join("&"); } var token = "", user = "", cmsSite = "", liteSite = "", mobileSite = "", loginError = "", authorizedPhrase = "Вы вошли как %s", demoUrl = "", demoTitle = "", cmsTitle = "", liteTitle = "", mobileTitle = "", title = ""; var date = new Date(); date.setDate( date.getDate() + 30 ); document.cookie = "lang=" + "ru; path=/; expires=" + date.toUTCString(); if (localStorage) { if (typeof localStorage.wwt != "undefined" && localStorage.wwt.length == 72 && token == "") { token = localStorage.wwt; if (window.history.pushState) window.history.pushState("", "", extendUrl(window.location.href, {access_token: token})); } if (typeof localStorage.wwl != "undefined" && localStorage.wwl.length > 0 && user == "") user = replaceCharsAndDecode(localStorage.wwl); if (user != "" && user != localStorage.wwl) localStorage.wwl = user; if (token != "" && token.length == 72 && token != localStorage.wwt) localStorage.wwt = token; } window.addEventListener("message", onMessage); function onMessage(e) { var msg = e.data; if (typeof msg == "string") { if (msg == "getToken") { // get token window.parent.postMessage("access_token=" + token, "*"); } else if (msg == "logout") { logout(); } } } window.parent.postMessage("access_token=" + token, "*"); //if (window.history.pushState) // window.history.pushState("", "", window.location.protocol + "//" + window.location.host + window.location.pathname); </script> </head> <body> <div class="wrapper"> <div class="header"></div> <div class="pattern"></div> <div class="content"> <div class="form-container"> <form method="POST" action="oauth.html?lang=ru&sign=0On%2FgmKl9yLGsVmeHky4%20i89c2nPkN3wXtjvgFe9HW8%3D" id="auth-form" onsubmit="checkLogin(event)"> <input type="hidden" name="client_id" value="Wialon Hosting" /> <input type="hidden" name="redirect_uri" value="http://stan.test.gurtam.net:8030/login_simple.html" /> <input type="hidden" name="access_type" value="-1" /> <input type="hidden" name="activation_time" value="0" /> <input type="hidden" name="duration" value="2592000" /> <input type="hidden" name="flags" value="0x7" /> <input type="hidden" name="sign" value="0On/gmKl9yLGsVmeHky4+i89c2nPkN3wXtjvgFe9HW8="> <input type="text" id="login" name="login" placeholder="Пользователь" value="" /> <input type="password" id="passw" name="passw" placeholder="Пароль" /> <div class='error' id="error" style="display: none;"></div> <input type="submit" value="Войти" /> <h1 class="title"><a id="demo" target="_blank" href="" style="display: none;"></a></h1> </form> <div id="login_status"> <h1 class="title"><span data-title="Выход" class="tooltip"><a href="#" onclick="logout(); return false;" class="no-underline" style="font-size: 24px; line-height: 16px;">&larr;</a></span> <span id="authorized" style="padding-left: 24px;"></span></h1> <h1 class="title"><a id="cms-site" target="_blank" href="" style="display: none;">CMS Manager</a></h1> <h1 class="title"><a id="monitoring-site" target="_blank" href="http://stan.test.gurtam.net:8030">Wialon</a></h1> <h1 class="title"><a id="lite-site" target="_blank" href="" style="display: none;">Wialon Lite</a></h1> <h1 class="title"><a id="mobile-site" target="_blank" href="" style="display: none;">Wialon Mobile</a></h1> </div> </div> </div> </div> <script> function logout() { if (localStorage) delete localStorage.wwt; var uri = "/login_simple.html"; var newUri = ""; var params = []; var skip_vars = {"access_token": 1, "demo_url": 1, "user_name": 1, "client_id": 1, "access_type": 1, "activation_time": 1, "duration": 1, "flags": 1, "svc_error": 1}; // parse query string var query = uri.split(window.location.pathname + '?'); if (query.length > 1) { query[1].split('&').forEach(function(i) { var param = i.split('='); if (!(param[0] in skip_vars)) params.push(param[0] + "=" + (param[1] || "")); }); if (params.length) newUri = "?" + params.join("&"); } else { query[0] = query[0].replace(window.location.pathname, ""); } if (demoUrl != "") newUri += (newUri == "" ? "?" : "&") + "demo_url=" + demoUrl; window.location.href = query[0] + window.location.pathname + newUri; } function checkLogin(e) { if (document.getElementById("login").value == "") { if (typeof e.preventDefault == "function") e.preventDefault(); e.returnValue = false; } } var loginTable = document.getElementById("auth-form"); var statusTable = document.getElementById("login_status"); if (token != "" && token.length == 72) { loginTable.style.display = "none"; statusTable.style.display = ""; document.getElementById("authorized").innerHTML = authorizedPhrase.replace("%s", "<b id=\"user_name\">" + user + "</b>"); var cmsSiteEl = document.getElementById("cms-site"); if (cmsSiteEl && cmsSite != "") { cmsSiteEl.href = cmsSite + "?token=" + token; cmsSiteEl.style.display = ""; if (cmsTitle != "") cmsSiteEl.innerHTML = cmsTitle; } var monitoringSiteEl = document.getElementById("monitoring-site"); if (monitoringSiteEl) { monitoringSiteEl.href += "?token=" + token; if (title != "") monitoringSiteEl.innerHTML = title; } var liteSiteEl = document.getElementById("lite-site"); if (liteSiteEl && liteSite != "") { liteSiteEl.href = liteSite + "?token=" + token; liteSiteEl.style.display = ""; if (liteTitle != "") liteSiteEl.innerHTML = liteTitle; } var mobileSiteEl = document.getElementById("mobile-site"); if (mobileSiteEl && mobileSite != "") { mobileSiteEl.href = mobileSite + "?token=" + token; mobileSiteEl.style.display = ""; if (mobileTitle != "") mobileSiteEl.innerHTML = mobileTitle; } } else { loginTable.style.display = ""; statusTable.style.display = "none"; document.getElementById("login").value = user; if (loginError != "") { var errorEl = document.getElementById("error"); errorEl.style.display = ""; errorEl.innerHTML = loginError; } if (demoUrl != "") { if (demoTitle == "") demoTitle = "Демо-вход"; var demoEl = document.getElementById("demo"); demoEl.style.display = ""; demoEl.href = demoUrl; demoEl.innerHTML = demoTitle; } } </script> </body> </html>
